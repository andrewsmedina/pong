<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript" src="cake.js"></script>
<script type="text/javascript" src="jquery-1.4.2.js"></script>
<script language="javascript">


window.onload = function() {
    var cena = new Canvas(document.body, 600, 400, {fill:'cyan'});
	var bola = new Circle(30, {id: 'bola', x: 0,  y: 0, fill: 'red'});
	
    var barra_esquerda = new Rectangle(20, 100, {x: 20, y: 250, fill: 'green'});
    var barra_direita = new Rectangle(20, 100, {x: 560, y: 250, fill: 'green'});

	var speedx = 7;
    var speedy = 7;
	
	bola.verificaDirecao = function() {
		if (this.x > 600)
		    speedx = speedx * -1;
		if (this.y > 400)
		    speedy = speedy * -1;
		if (this.x < 0)
		    speedx = speedx * -1;
		if (this.y < 0)
		    speedy = speedy * -1;
	}
	
	bola.addFrameListener(function(t, dt) {
			this.x += speedx;
			this.y += speedy;
			
            this.verificaDirecao();
    });
    
    document.onkeydown = function(e) {
        console.log(e.keyCode)
        
        if (e.keyCode === 40) {
            barra_esquerda.y += 16;
            barra_direita.y += 16;
        }
        
        if (e.keyCode == 38) {
            barra_esquerda.y -= 16;
            barra_direita.y -= 16;
        } 
    }
    
    cena.append(barra_esquerda);
    cena.append(barra_direita);
    
    cena.append(bola);

};


</script>
</head>
<body>
</body>
</html>